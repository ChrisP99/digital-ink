\chapter{Relational Database Service (RDS)}\label{ch:relational-database-service}
% Evie was hereâ€¦
Amazon RDS service allows a user to create a fully-featured and highly-available SQL database that is automatically
replicated to another availability zone. (TODO: Oops, no multi-az) This means that if the primary database becomes
unavailable, there is automatic failover providing redundancy for all the data stored within.

To create an Amazon RDS instance, a suitable name/identifier for the database is required before created as well as a
selection for the resource limits for the virtual server.
The database requires a username and passphrase, although for additional security there is the option to automatically
generate a passphrase.

Afterwards, the type of SQL database required (such as MySQL, PostgreSQL, MariaDB or others) will be selected and then
the database should begin provisioning.

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-authentication.png}
    \caption{Selection of RDS Authentication Option}
    \label{fig:rds-auth}
\end{figure}

Password authentication was used for the RDS instance as we did not have permission from the root user to create IAM roles within this lab environment. In the future, it would be recommended to select one of the other options to improve security, however this was not possible for the project.

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-availability-durability.png}
    \caption{Selection RDS Multiple Availability Zone}
    \label{fig:rds-avail}
\end{figure}

Multiple availability zones were selected to ensure that the database was highly available.

\begin{figure}[!htbp]
    \centering
<<<<<<< Updated upstream
    \includegraphics[width=\textwidth]{resources/rds/rds-connectivity-1.png}
    \caption{Selection of CloudWatch metric for EC2 instance.}
||||||| constructed merge base
    \includegraphics[width=\textwidth]{resources/rds-connectivity-1.png}
    \caption{Selection of CloudWatch metric for EC2 instance.}
=======
    \includegraphics[width=\textwidth]{resources/rds/rds-connectivity-1.png}
    \caption{Selection of VPC and Subnet Groups}
>>>>>>> Stashed changes
    \label{fig:rds-connect}
\end{figure}



\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-create-engine.png}
    \caption{Selection of Database Engine}
    \label{fig:rds-engine}
\end{figure}

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-instance-config.png}
    \caption{Selection of RDS Instance Size}
    \label{fig:rds-instance-conf}
\end{figure}

A micro-sized instance was selected as we must save on AWS billing credit.

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-monthly-costs.png}
    \caption{Estimated Monthly RDS Cost}
    \label{fig:rds-costs}
\end{figure}

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-security-group.png}
    \caption{Selection of CloudWatch metric for EC2 instance.}
    \label{fig:rds-security}
\end{figure}

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-settings.png}
    \caption{Selection of CloudWatch metric for EC2 instance.}
    \label{fig:rds-settings}
\end{figure}

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-storage.png}
    \caption{Selection of CloudWatch metric for EC2 instance.}
    \label{fig:rds-storage}
\end{figure}

\begin{figure}[!htbp]
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-tables-creation.png}
    \caption{Selection of CloudWatch metric for EC2 instance.}
    \label{fig:rds-tables}
\end{figure}


\begin{figure}[!htbp]
<<<<<<< Updated upstream
    \centering
    \includegraphics[width=\textwidth]{resources/rds/rds-templates.png}
    \caption{Selection of CloudWatch metric for EC2 instance.}
    \label{fig:rds-templates}
\end{figure}
||||||| constructed merge base
\centering
\includegraphics[width=\textwiresources/rds/rds-templates.png}
\caption{Selection of CloudWatch metric for EC2 instance.}
\label{fig:rds-templates}
\end{figure}
=======
\centering
\includegraphics[width=\textwiresources/rds/rds-templates.png}
\caption{Selection of CloudWatch metric for EC2 instance.}
\label{fig:rds-templates}
\end{figure}


MySQL was selected as it was the same database engine that the web application was originally using within Docker.

Then, MySQL was installed on the EC2 instance in order to sign into the new database and create tables.

\begin{figure}[!htbp]
\centering
\includegraphics[width=\textwidth]{resources/rds/rds-mysql-install.png}
\caption{Installation of MySQL on EC2 Instance}
\label{fig:rds-msql-install}
\end{figure}

\begin{figure}[!htbp]
\centering
\includegraphics[width=\textwidth]{resources/rds/rds-database-creation.png}
\caption{Creation of database table}
\label{fig:rds-db-create}
\end{figure}


TODO: Take screenshot of docker-compose being edited to remove mysql
>>>>>>> Stashed changes
